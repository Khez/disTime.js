/* * * * * * * * * *
 *   disTime .js   *
 *  Version 0.7.4  *
 *  License:  MIT  *
 * Simon  Waldherr *
 * * * * * * * * * */

function trim11(a){a=a.replace(/^\s+/,"");for(var b=a.length-1;b>=0;b--)if(/\S/.test(a.charAt(b))){a=a.substring(0,b+1);break}return a}function checkForAnd(a,b,c){return a&&trim11(b)!==c.words.preAgo&&trim11(b)!==c.words.inFuture?" "+c.words.and+" ":""}languages={declOfNum:function(a,b){return cases=[2,0,1,1,1,2],b[a%100>4&&20>a%100?2:cases[5>a%10?a%10:5]]},"int":{words:{preAgo:"",postAgo:"ago",and:"and",inFuture:"in"},year:[""],month:[],week:[],day:[],hour:[],minute:[],second:[]},en:{words:{preAgo:"",postAgo:"ago",and:"and",inFuture:"in"},year:["year","years","years"],month:["month","months","months"],week:["week","weeks","weeks"],day:["day","days","days"],hour:["hour","hours","hours"],minute:["minute","minutes","minutes"],second:["second","seconds","seconds"]},de:{words:{preAgo:"vor",postAgo:"",and:"und",inFuture:"in"},year:["Jahr","Jahren","Jahren"],month:["Monat","Monaten","Monaten"],week:["Woche","Wochen","Wochen"],day:["Tag","Tagen","Tagen"],hour:["Stunde","Stunden","Stunden"],minute:["Minute","Minuten","Minuten"],second:["Sekunde","Sekunden","Sekunden"]},it:{words:{preAgo:"",postAgo:"fa",and:"e",inFuture:"in"},year:["anno","anni"],month:["mese","mesi"],week:["settimana","settimane"],day:["giorno","giorni"],hour:["ora","ore"],minute:["minuto","minuti"],second:["secondo","secondi"]},es:{words:{preAgo:"",postAgo:"antes",and:"y",inFuture:"en"},year:["a&#241;o","a&#241;os"],month:["mes","meses"],week:["semana","semanas"],day:["d&#237;a ","d&#237;as"],hour:["hora","horas"],minute:["minuto","minutos"],second:["segundo","segundos"]},fr:{words:{preAgo:"il ya",postAgo:"",and:"et",inFuture:"en "},year:["an","ans"],month:["mois","mois"],week:["semaine","semaines"],day:["jour","jours"],hour:["heure","heures"],minute:["minute","minutes"],second:["seconde","secondes"]},pt:{words:{preAgo:"",postAgo:"atr&#225;s",and:"e",inFuture:"em"},year:["ano","anos"],month:["m&#234;s","meses"],week:["semana","semanas"],day:["dia","dias"],hour:["hora","horas"],minute:["minuto","minutos"],second:["segundo","segundos"]},ru:{words:{preAgo:"",postAgo:"назад",and:"и",inFuture:"через"},year:["год","года","лет"],month:["месяц","месяца","месяцев"],week:["неделя","неждели","недель"],day:["день","дня","дней"],hour:["час","часа","часов"],minute:["минута","минуты","минут"],second:["секунду","секунды","секунд"]}};var disTimeRepeater,disTimeObject,disTime;disTimeObject={parseTimestamp:function(a,b,c,d){"use strict";function e(a){return parseInt(a,10)}var f,g;if(void 0===d&&(d=!1),g=c>b?c-b:b-c,f=c>b?" "+a.words.preAgo+" ":" "+a.words.inFuture+" ",g>31536e3){var h=e(e(g)/e(31536e3));f+=h+" "+languages.declOfNum(h,a.year)}if(31536e3>g&&g>2419200||g>31536e3&&d&&0!==e(g%31536e3/2419200)){f+=checkForAnd(d,f,a);var i=e(g%31536e3/2419200);if(f+=i+" "+languages.declOfNum(i,a.month),31536e3>g&&d&&0!==e(g%2419200/86400)){f+=checkForAnd(d,f,a);var j=e(g%2419200/86400);f+=j+" "+languages.declOfNum(j,a.day)}}if(2419200>g&&g>604800||10368e3>g&&g>2419199&&d&&0!==e(g%2592e3/2419200)){f+=checkForAnd(d,f,a);var k=e(g%2419200/604800);console.log("weeks:"+k),f+=k+" "+languages.declOfNum(k,a.week)}if(604800>g&&g>86399||2419200>g&&g>604799&&d&&0!==e(g%604800/86400)){f+=checkForAnd(d,f,a);var j=e(g%2419200/86400);f+=j+" "+languages.declOfNum(j,a.day)}if(86400>g&&g>3599||604800>g&&g>86399&&d&&0!==e(g%86400/3600)){f+=checkForAnd(d,f,a);var l=e(g%86400/3600);console.log("hours:"+l),f+=l+" "+languages.declOfNum(l,a.hour)}if(3600>g&&g>59||86400>g&&g>3599&&d&&0!==e(g%3600/60)){f+=checkForAnd(d,f,a);var m=e(g%3600/60);f+=m+" "+languages.declOfNum(m,a.minute)}if(60>g||3600>g&&g>59&&d&&0!==g%60){f+=checkForAnd(d,f,a);var n=g%60;f+=n+" "+languages.declOfNum(n,a.second)}return c>b&&(f+=" "+a.words.postAgo),f}},disTime=function(a,b,c){"use strict";var d,e,f,g,h,i,j;for(void 0===c&&(c=!1),void 0===b&&(b=navigator.language||navigator.userLanguage),void 0===languages[b]&&(b=void 0!==languages[b.split("-")[0]]?b.split("-")[0]:"en"),i=parseInt(Date.now()/1e3,10)+a,d=document.getElementsByClassName("distime"),e=d.length,f=i,g=0;e>g;g+=1)j=parseInt(d[g].getAttribute("data-time"),10),d[g].innerHTML=disTimeObject.parseTimestamp(languages[b],j,i,c),h=i>j?i-j:j-i,d[g].hasAttribute("alt")||d[g].setAttribute("title",new Date(1e3*j).toString()),f>h&&(f=h);window.clearTimeout(disTimeRepeater),disTimeRepeater=61>f||c&&3601>f?setTimeout(disTime,1e3,a,b,c):3601>f||c&&86400>f?setTimeout(disTime,6e4,a,b,c):86400>f||c?setTimeout(disTime,3600001,a,b,c):setTimeout(disTime,86400001,a,b,c)};